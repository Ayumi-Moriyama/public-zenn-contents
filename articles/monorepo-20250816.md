---
title: "Nuxt4 + Turborepo + PrimeVue ã§ãƒ¢ãƒãƒ¬ãƒç’°å¢ƒã‚’ä½œã‚‹"
emoji: "ğŸš—"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Nuxt,pnpm,Turborepo,PrimeVue]
published: true
---

Nuxt4ã§ãƒ¢ãƒãƒ¬ãƒç’°å¢ƒã‚’æ§‹ç¯‰ã—ãŸéš›ã€Turborepoã¨PrimeVueã‚‚å°å…¥ã—ãŸã®ã§ãã®æ‰‹é †ã®è¨˜éŒ²ã§ã™ã€‚

# ç’°å¢ƒæ§‹ç¯‰ã§ä½¿ã£ãŸã‚‚ã®
- Nuxt4
- Turborepo
- PrimeVue
- pnpm
- PowerShell
- VS Code

ã¾ãšã€ãƒ¢ãƒãƒ¬ãƒã¨Turborepoã«ã¤ã„ã¦è§£èª¬ã—ã€ãã®æ¬¡ã«æ‰‹é †ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

# ãƒ¢ãƒãƒ¬ãƒã¨ã¯ï¼Ÿ
ãƒ¢ãƒãƒ¬ãƒï¼ˆMonorepoï¼‰ã¨ã¯ã€é–¢é€£ã™ã‚‹è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å˜ä¸€ã®ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹æ‰‹æ³•ã§ã™ã€‚ä¸€æ–¹ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«å€‹åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ç®¡ç†ã™ã‚‹æ–¹æ³•ã¯ãƒãƒªãƒ¬ãƒï¼ˆPolyrepoï¼‰ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

ã“ã®è¨˜äº‹ãŒåˆ†ã‹ã‚Šã‚„ã™ã‹ã£ãŸã§ã™ã€‚

https://blog.cloudsmith.co.jp/2023/06/374/

## ãƒ¢ãƒãƒ¬ãƒã«ã¯pnpm
ãƒ¢ãƒãƒ¬ãƒç’°å¢ƒã§ã¯ã€pnpmã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒè‰¯ã„ãã†ã§ã™ã€‚pnpmã¯npmã‚„yarnã¨é•ã„ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿä½“ã¯1ã¤ã§ã€å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®node_modulesã¯å®Ÿä½“ã¸ã®ãƒªãƒ³ã‚¯ï¼ˆã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ï¼‰ã‚’ç½®ãã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚

:::message
npmã‚„yarnã¯åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã€é‡è¤‡ã™ã‚‹åˆ†ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã„ã¾ã™ã€‚
:::

ä»–ã«ã‚‚ã€ä¾å­˜é–¢ä¿‚ã®ç®¡ç†ãŒã‚ˆã‚Šå³æ ¼ã§ã‚ã‚‹ã“ã¨ã€ãƒ¢ãƒãƒ¬ãƒå†…ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚’ç°¡å˜ã«ã™ã‚‹ã€Œãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ©Ÿèƒ½ã€ãŒå‚™ã‚ã£ã¦ã„ã‚‹ã“ã¨ãªã©ã‹ã‚‰ã€ãƒ¢ãƒãƒ¬ãƒã«å‘ã„ã¦ã„ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ãã†ã§ã™ã€‚

# Turborepoã¨ã¯ï¼Ÿ
Turborepoã¯ã€Vercelç¤¾ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚ŒãŸãƒ¢ãƒãƒ¬ãƒå‘ã‘ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã¨
> Turborepoã¯ã€JavaScriptãŠã‚ˆã³TypeScriptã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å‘ã‘ã®é«˜æ€§èƒ½ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ãƒ¢ãƒãƒ¬ãƒã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€å˜ä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚‚é«˜é€ŸåŒ–ã—ã¾ã™ã€‚

ã¨ã®ã“ã¨ã§ã™ã€‚

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç”¨ã„ãŸåŠ¹ç‡çš„ãªãƒ“ãƒ«ãƒ‰
Turborepoã®å¤§ããªç‰¹å¾´ã¨ã—ã¦ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã™ã‚‹ç‚¹ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚ä¸€åº¦å®Ÿè¡Œã—ãŸã‚¿ã‚¹ã‚¯ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆä¿å­˜ï¼‰ã—ã¦ãŠãã€æ¬¡ã«åŒã˜ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹éš›ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ãŒãªã‘ã‚Œã°ã‚¿ã‚¹ã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¾‹ãˆã°å¤‰æ›´ãŒã‚ã£ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã‘ã‚’å†ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã€ã¤ã¾ã‚Šå¾…ã¡æ™‚é–“ã®çŸ­ç¸®ãŒæœŸå¾…ã§ãã¾ã™ã€‚

## ã‚¿ã‚¹ã‚¯ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å®šç¾©
Turborepoã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚ã‚„ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œé †åºã‚’ã€`turbo.json`ã¨ã„ã†ä¸€ã¤ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡å˜ã«å®šç¾©ã§ãã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€æ­£ã—ã„é †åºã§åŠ¹ç‡çš„ã«ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ãã†ã§ã™ã€‚

è©³ç´°ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”è¦§ãã ã•ã„ã€‚

https://turborepo.com/docs

# ãƒ¢ãƒãƒ¬ãƒç’°å¢ƒæ§‹ç¯‰æ‰‹é †
å‰ç½®ããŒé•·ããªã‚Šã¾ã—ãŸãŒã€ã“ã“ã‹ã‚‰ç’°å¢ƒæ§‹ç¯‰æ‰‹é †ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚
ã“ã®ã‚ˆã†ãªæ§‹æˆã§ä½œã‚Šã¾ã™ã€‚

```
my-monorepo/
â”œâ”€â”€ app                     # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘Nuxt   
â”‚   â”œâ”€â”€ nuxt.config.json        # appã®è¨­å®š
â”‚   â””â”€â”€ package.json            # appã®è¨­å®š
â”œâ”€â”€ backoffice/             # ç®¡ç†è€…å‘ã‘Nuxt
â”‚   â”œâ”€â”€ nuxt.config.json        # backofficeã®è¨­å®š
â”‚   â””â”€â”€ package.json            # backofficeã®è¨­å®š
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ ui/                 # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ nuxt.config.json    # PrimeVueã®è¨­å®š
â”‚       â””â”€â”€ package.json        # PrimeVueã®è¨­å®š
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ turbo.json
â””â”€â”€ package.json

```

## 1.pnpmã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ã‚‚ã—ã¾ã pnpmã‚’å…¥ã‚Œã¦ã„ãªã‘ã‚Œã°ä¸‹è¨˜ã‚’å®Ÿè¡Œ
```PowerShell
npm install -g pnpm
```
å…¥ã£ã¦ã„ã‚‹ã‹ç¢ºèª
```PowerShell
pnpm -v
```

## 2.ãƒ¢ãƒãƒ¬ãƒã®åˆæœŸåŒ–
```PowerShell
mkdir my-monorepo
cd my-monorepo
pnpm init
```

## 3.ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š
`pnpm-workspace.yaml`ã‚’ä½œæˆã™ã‚‹
```yaml:pnpm-workspase.yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

## 4.Turborepoã®å°å…¥
```PowerShell
pnpm add -D turbo -w
```
:::message alert
ä»Šå›ã¯PowerShellã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€æœ«å°¾ã«-wã‚’ã¤ã‘ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã—ãŸã€‚
:::

- `package.json`ï¼ˆãƒ«ãƒ¼ãƒˆï¼‰
```json:package.json
{
  "name": "my-monorepo",
  "scripts": {
    "dev": "turbo run dev --parallel",
    "dev:app": "turbo run dev --filter=app",
    "dev:backoffice": "turbo run dev --filter=backoffice",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "packageManager": "pnpm@10.14.0",
  "devDependencies": {
    "turbo": "^2.5.6"
  },
  "workspaces": [
    "app",
    "backoffice",
    "packages/*"
  ]
    //ãã®ä»–ã€å„ç¨®è¨­å®š
}
```

`turbo.json`ã‚’ä½œæˆ
```json:turbo.json
{
  "$schema": "https://turbo.build/schema.json",
  "pipeline": {
    "dev": {
      "cache": false,
      "persistent": true
    },
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".output/**", ".nuxt/**"]
    },
    "lint": {
      "outputs": []
    }
  }
}

```

## 5.Nuxtãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆï¼ˆapp,backofficeï¼‰
Nuxt4ã®å°å…¥
```PowerShell
pnpm create nuxt-app app
pnpm create nuxt-app backoffice
```

appã¨backofficeã®`package.json`ã®**name**ã‚’æ›¸ãæ›ãˆã‚‹
- appå´ã®nameã¯**app**
- appå´ã®nameã¯**backoffice**
:::message
`pnpm-workspace`ã¨åŒã˜åå‰ã«ã—ã¾ã™ã€‚
::: 

## 6.å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½œæˆ
```PowerShell
mkdir packages/ui
cd packages/ui
pnpm init
```

## 7.PrimeVueã®å°å…¥
**Packages/ui**ã«å…¥ã‚Œã¾ã™ã€‚
```PowerShell
pnpm add primevue @primeuix/themes
pnpm add -D @primevue/nuxt-module
```
PrimeIconsã‚‚å…¥ã‚Œã¦ãŠãã¾ã™ã€‚
```PowerShell
pnpm add primeicons
```

```json:/packages/ui/package.json
{
  "name": "ui",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "packageManager": "pnpm@10.14.0",
  "dependencies": {
    "@primeuix/themes": "^1.2.3",
    "primeicons": "^7.0.0",
    "primevue": "^4.3.7",
    "sass": "^1.90.0"
  },
  "devDependencies": {
    "@primevue/nuxt-module": "^4.3.7"
  }
  //ãã®ä»–ã€å„ç¨®è¨­å®š
}

```

`nuxt.config.ts`(packages/ui)ã«PrimeVueã®è¨˜è¿°ã‚’ã—ã¾ã™ã€‚
ãƒ†ãƒ¼ãƒã¯ä¸€æ—¦ Aura ã«ã—ã¦ã¿ã¾ã—ãŸã€‚

```ts:packages/ui/nuxt.config.ts
import Aura from '@primeuix/themes/aura';
export default defineNuxtConfig({
    modules: ['@primevue/nuxt-module'],
    primevue: {
        /* Configuration */
        usePrimeVue: true,
        options: {
            theme: {
                preset: Aura,
            },
            ripple: true
        },
        components: {
            include: '*' // ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆä¾¿åˆ©ã§ã™ãŒã€æœ¬ç•ªç’°å¢ƒã§ã¯å¿…è¦ãªã‚‚ã®ã ã‘ã«çµã‚‹ã®ãŒæ¨å¥¨ã•ã‚Œã¾ã™ï¼‰
        }
    },
    css: [
        'primeicons/primeicons.css' // ã‚¢ã‚¤ã‚³ãƒ³CSS
    ]    
})

```

appã¨backofficeã®`nuxt.config.ts`ã«ç¶™æ‰¿
```ts:nuxt.config.ts
import { defineNuxtConfig } from 'nuxt/config'

export default defineNuxtConfig({
  extends: ['../packages/ui'],
  // ãã®ä»–è¨­å®šãŒã‚ã‚Œã°è¨˜è¿°
})

```

:::message
Vuetifyã ã¨ã“ã®æ–¹æ³•ã§ã¯ä¸Šæ‰‹ãã„ã‹ãªã‹ã£ãŸã®ã§ã€ä½¿ç”¨ã™ã‚‹UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã£ã¦å°å…¥æ–¹æ³•ã‚’å¤‰ãˆã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚
:::

## 8.ãƒšãƒ¼ã‚¸ä½œæˆ
app,backofficeãã‚Œãã‚Œã®`pages/app.vue`ãªã©ã§ã€PrimeVueã‚’ä½¿ã£ãŸãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚

ä¾‹ï¼‰
```vue:app/pages/app.vue
<template>
  <div>
    <h1>Welcome to PrimeVue on Nuxt!</h1>
    
    <div>
      <Button label="Submit" icon="pi pi-check" />
    </div>
  </div>
</template>
```

## 9.ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼†å®Ÿè¡Œ
ãƒ«ãƒ¼ãƒˆã«ã¦
```PowerShell
pnpm install #å…¨ä½“ã®ä¾å­˜ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm dev #ä¸¡æ–¹åŒæ™‚ã«èµ·å‹•
```
ãƒ«ãƒ¼ãƒˆã®`package.json`ã®scriptsã§æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§ã€pnpm devã§appã¨backofficeã‚’åŒæ™‚ã«èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã¾ãŸã€ç‰‡æ–¹ãšã¤ç«‹ã¡ä¸Šã’ã‚‹æŒ‡å®šã‚‚ã—ã¦ã„ã‚‹ãŸã‚ã€
```PowerShell
pnpm dev:app
pnpm dev:backoffice
```
ã§ç‰‡æ–¹ã ã‘ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚æœ¬æ¥ãªã‚‰appã¾ãŸã¯backofficeã«ç§»å‹•ã—ã¦ã‹ã‚‰pnpm devã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ç§»å‹•ã—ãªãã¦ã„ã„åˆ†æ¥½ã§ã™ã€‚
:::message
å¾“æ¥é€šã‚Šã€cdã§appã¾ãŸã¯backofficeã«ç§»å‹•ã—pnpm devã§ã‚‚ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚
:::
ã“ã®ã‚ˆã†ãªå½¢ã§ã€ç„¡äº‹é–‹ç™ºç”»é¢ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
![](/images/primevue-sample.png)

# ã¾ã¨ã‚
Nuxt4ã§ãƒ¢ãƒãƒ¬ãƒç’°å¢ƒã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚Turborepoã¯ä»Šå›èª¿ã¹ã¦ã„ã¦åˆã‚ã¦çŸ¥ã£ãŸã®ã§ã™ãŒã€è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åŒæ™‚ã«ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ãŒã§ããŸã‚Šä¾¿åˆ©ã ã¨æ€ã„ã¾ã—ãŸã€‚Vercelç¤¾é–‹ç™ºãªã®ã§ã€Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«ç‰¹ã«åŠ¹æœãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤ã‚‚è©¦ã—ã¦ã¿ã¦ã¾ãŸè¨˜äº‹ã«ã§ããŸã‚‰ã¨æ€ã„ã¾ã™ã€‚